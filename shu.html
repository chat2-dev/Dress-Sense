<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Parametric Shirt Engine â€“ v4 (Sleeve Opening)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body{
      margin:0;
      font-family:system-ui,Segoe UI,Roboto;
      background:#eef2f5;
      display:flex;
      min-height:100vh;
    }

    .controls{
      width:340px;
      background:white;
      padding:20px;
      box-shadow:4px 0 16px rgba(0,0,0,0.1);
    }

    .controls h2{margin-top:0}

    .controls label{
      display:block;
      margin-top:14px;
      font-size:14px;
    }

    .controls input{width:100%;}

    .canvas{
      flex:1;
      display:flex;
      justify-content:center;
      align-items:center;
    }

    svg{width:440px;}
  </style>
</head>
<body>

<div class="controls">
  <h2>Shirt Parameters (v4)</h2>

  <label>Body Length
    <input type="range" min="0.45" max="0.85" step="0.01" value="0.65" id="length">
  </label>

  <label>Shoulder Width
    <input type="range" min="0.35" max="0.6" step="0.01" value="0.45" id="shoulder">
  </label>

  <label>Bust Width
    <input type="range" min="0.38" max="0.6" step="0.01" value="0.5" id="bust">
  </label>

  <label>Waist Width
    <input type="range" min="0.28" max="0.55" step="0.01" value="0.4" id="waist">
  </label>

  <label>Hip Width
    <input type="range" min="0.35" max="0.6" step="0.01" value="0.48" id="hip">
  </label>

  <label>Sleeve Length
    <input type="range" min="0.1" max="0.60" step="0.01" value="0.25" id="sleeve">
  </label>

  <label>Sleeve Opening
    <input type="range" min="0.08" max="0.30" step="0.01" value="0.18" id="opening">
  </label>

  <label>Armhole Depth
    <input type="range" min="0.05" max="0.25" step="0.01" value="0.12" id="armhole">
  </label>

  <label>Neck Radius
    <input type="range" min="0.08" max="0.2" step="0.01" value="0.12" id="neck">
  </label>
</div>

<div class="canvas">
  <svg id="svg" viewBox="0 0 300 540"></svg>
</div>

<script>
  const svg = document.getElementById('svg');
  const ids = ['length','shoulder','bust','waist','hip','sleeve','opening','neck','armhole'];
  const p = Object.fromEntries(ids.map(id => [id, document.getElementById(id)]));
  Object.values(p).forEach(i => i.oninput = draw);

  function draw(){
    const W = 300;
    const H = 540;
    const cx = W/2;

    const L  = H * p.length.value;
    const SW = W * p.shoulder.value;
    const BW = W * p.bust.value;
    const WW = W * p.waist.value;
    const HW = W * p.hip.value;
    const SL = W * p.sleeve.value;
    const SO = W * p.opening.value;
    const AD = H * p.armhole.value;
    const NR = W * p.neck.value;

    const topY = 60;
    const bustY = topY + L*0.25;
    const waistY = topY + L*0.48;
    const hipY = topY + L*0.72;
    const hemY = topY + L;

    const lShoulder = cx - SW/2;
    const rShoulder = cx + SW/2;

    const sleeveEndY = topY + AD + SL;

    svg.innerHTML = `
      <defs>
        <linearGradient id="g" x1="0" x2="0" y1="0" y2="1">
          <stop offset="0%" stop-color="#7dd3fc" />
          <stop offset="100%" stop-color="#38bdf8" />
        </linearGradient>
      </defs>

      <!-- BODY -->
      <path d="
        M ${lShoulder} ${topY}
        C ${cx-BW/2} ${bustY}, ${cx-WW/2} ${waistY}, ${cx-HW/2} ${hipY}
        Q ${cx} ${hemY}, ${cx+HW/2} ${hipY}
        C ${cx+WW/2} ${waistY}, ${cx+BW/2} ${bustY}, ${rShoulder} ${topY}
        Z"
        fill="url(#g)" stroke="#000" stroke-width="3" />

      <!-- LEFT SLEEVE WITH OPENING -->
      <path d="
        M ${lShoulder} ${topY}
        C ${lShoulder-SL} ${topY+AD+20}, ${lShoulder-SL} ${sleeveEndY-20}, ${lShoulder-SO} ${sleeveEndY}
        L ${lShoulder+SO} ${sleeveEndY}
        C ${lShoulder-5} ${topY+AD+10}, ${lShoulder-5} ${topY+AD+10}, ${lShoulder} ${topY}
        Z"
        fill="url(#g)" stroke="#000" stroke-width="3" />

      <!-- RIGHT SLEEVE WITH OPENING -->
      <path d="
        M ${rShoulder} ${topY}
        C ${rShoulder+SL} ${topY+AD+20}, ${rShoulder+SL} ${sleeveEndY-20}, ${rShoulder+SO} ${sleeveEndY}
        L ${rShoulder-SO} ${sleeveEndY}
        C ${rShoulder+5} ${topY+AD+10}, ${rShoulder+5} ${topY+AD+10}, ${rShoulder} ${topY}
        Z"
        fill="url(#g)" stroke="#000" stroke-width="3" />

      <!-- NECK -->
      <path d="M ${cx+NR} ${topY} A ${NR} ${NR} 0 0 1 ${cx-NR} ${topY}"
            stroke="#000" stroke-width="4" fill="none" />
    `;
  }

  draw();
</script>

</body>
</html>
